---
title:  "[OS] 프로세스 관리"
excerpt: "[OS] 프로세스 관리"
toc: true
toc_sticky: true

header:
  teaser: /assets/images/bio-photo-keyboard-teaser.jpg

categories:
  - OS
<!-- tags:
  - Database 
last_modified_at: 2021-01-04 -->
---
# 프로세스 관리

## 1. 프로세스의 개념

- '프로세스(process)'란 실행 중인 프로그램(program in execution)을 뜻한다. 디스크에 실행파일 형태로 존재하던 프로그램이 메모리에 올라가서 실행되기 시작하면 비로소 생명력을 갖는 프로세스가 되며,
프로세스는 CPU를 휙득해 자신의 코드를 수행하기도 하고, 때로는 CPU를 반환하고(운영체제에게) 입출력 작업을 수행하기도 한다.

- '프로세스의 문맥'이란 프로세스가 현재 어떤 상태에서 실행되고 있는지 규명하기 위해 필요한 정보를 의미한다. 타이머 인터럽트에 의해 짧은 시간 CPU를 빼앗겼다가 다시 휙득해 명령의 수행을 재개하는 
  시점이 되면 이전의 CPU 보유 시기에 어느 부분까지 명령을 수행했는지 직전 수행 시점의 정확한 상태를 재현할 필요가 있다. 이때 정확한 재현을 위해 필요한 정보가 프로세스의 문맥이다. 
  
- 프로세스의 문맥을 크게 세 가지로 분류할 수 있다.
  - 하드웨어 문맥 : CPU의 수행 상태를 나타내는 것으로 프로그램 카운터 값과 각종 레지스터에 저장하고 있는 값들을 의미한다.
  - 프로세스 주소 공간 : 프로세스는 코드, 데이터, 스택으로 구성되는 자기 자신만의 독자적인 주소 공간을 가지고 있다.
  - 커널상의 문맥 : 프로그램이 수행되어 프로세스가 되면 운영체제는 프로세스를 관리하기 위한 자료구조를 유지한다. PCB와 커널 스택이 이에 해당한다.

## 2. 프로세스의 상태
프로세스의 상태는 실행(running), 준비(ready), 봉쇄(blocked, wait, sleep)의 세가지로 구분된다.

- 실행 상태 : 실행 상태는 프로세스가 CPU를 보유하고, 기계어 명령을 실행하고 있는 상태를 가리킨다.
- 준비 상태 : 프로세스가 CPU만 보유하면 당장 명령을 실행할 수 있지만, CPU를 할당받지 못한 상태를 가리킨다.
- 봉쇄 상태 : 프로세스 본인이 요청한 입출력 작업같은 오래 걸리는 작업을 진행 중인 경우에 대기하는 상태를 가리킨다.

이 밖에 프로세스가 시작되어 그 프로세스를 위한 각종 자료구조는 생성되었지만 아직 메모리 휙득을 승인받지 못한 '시작 상태'와 프로세스가 종료되었으나 운영체제가 그 프로세스와 관련된 자료구조를 아직 정리하지 못한 상태인 '완료 상태'가 있다.


- 프로세스가 타이머 인터럽트나 입출력 요청으로 인해 봉쇄 상태로 바뀌는 경우, 다음에 실행시킬 프로세스를 변경하기 위해 원래 수행 중이던 프로세스의 문맥을 저장하고 새로운 프로세스의 문맥을 세팅하는 과정을 '문맥교환(context switch)'라고 한다.

- 준비 상태에 있는 프로세스들 중에서 CPU를 할당받을 프로세스를 선택한 후, 실제로 CPU의 할당권을 넘겨받는 과정을 'CPU 디스패치(dispatch)'라고 한다.

- 입출력 요청으로 봉쇄상태에 있게된 프로세스는 입출력 큐에 줄 서 있다가 자기 차례가 되어 컨트롤러로부터 서비스를 받고 나면 컨트롤러는 CPU에게 인터럽트로 이를 알린다. CPU는 어떤 프로세스를 실행하다가 인터럽트가 
  발생한 것을 보고 인터럽트 처리 루틴으로 이동하는데 이때 실행중이던 프로세스의 상태는 사용자모드 상태에서 커널 모드 상태로 변한다. 이 인터럽트 처리루틴이 직전에 수행되던 프로세스와의 업무와는 연관성이 없긴 하지만
  그럼에도 직전 프로세스가 업무를 수행하다가 인터럽트가 발생해 커널모드로 진입한것으로 본다.


## 3. 프로세스 제어블록
프로세스 제어블록(Process Control Block: PCB)란 운영체제가 시스템 내의 프로세스들을 관리하기 위해 프로세스마다 유지하는 정보들을 담는 커널 내의 자료구조를 뜻한다. 다음과 같은 요소로 구성되어 있다.

- 프로세스의 상태(process state)
- 프로그램 카운터(program counter)
- CPU 레지스터(CPU register)의 값
- CPU 스케줄링 정보(CPU scheduling information)
- 메모리 관리 정보(memory management information)
- 자원 사용 정보(accounting information)
- 입출력 상태 정보(I/O status information)







